# JSON Schema Validator

A comprehensive JSON schema validator for the OrderDetails schema with testing and validation capabilities.

## Setup

1. Install dependencies:
```bash
pip install jsonschema>=4.17.0
# or
pip install -r requirements_validator.txt
```

## Features

### ✅ Schema Validation
- Validates JSON data against the `simple.json` OrderDetails schema
- Comprehensive error reporting with detailed validation messages
- Schema structure validation to ensure schema integrity

### ✅ Multiple Usage Modes
- **Single file validation**: Validate one JSON file
- **Comprehensive testing**: Test all existing data files
- **Interactive mode**: Paste JSON data for real-time validation
- **Sample data generation**: Create valid sample data files

### ✅ Detailed Reporting
- Clear success/failure indicators
- Detailed error paths and descriptions
- Schema information display
- Test summaries with statistics

## Usage Examples

### Basic File Validation
```bash
python3 validate_json_schema.py --data data/sample_valid.json
```

### Run All Tests
```bash
python3 validate_json_schema.py --test-all
```

### Create Sample Valid Data
```bash
python3 validate_json_schema.py --create-sample data/my_sample.json
```

### View Schema Information
```bash
python3 validate_json_schema.py --schema-info
```

### Interactive Validation
```bash
python3 validate_json_schema.py --interactive
```

### Use Different Schema
```bash
python3 validate_json_schema.py --schema schemas/input_1_schema.json --data data/order_detail.json
```

## Schema Structure

The `simple.json` schema expects data in this format:

```json
{
  "OrderDetails": {
    "OrderId": 12345,
    "Status": "Active",
    "Equipment": [
      {
        "ModelCode": "TRK001",
        "Rate": "45.99"
      }
    ],
    "TotalPaid": 71.49
  }
}
```

### Required Fields
- `OrderDetails` (object) - Main container
  - `OrderId` (integer) - Unique identifier
  - `Status` (string) - One of: Return, Active, Completed, Cancelled, Pending
  - `Equipment` (array) - Array of equipment objects
    - `ModelCode` (string) - Equipment model code
    - `Rate` (string) - Equipment rate as string
  - `TotalPaid` (number) - Total amount paid (minimum 0)

## Test Results

When running `--test-all`, the validator tests:

1. **existing data files** in the `data/` directory
2. **sample valid data** generated by the tool

Current test results show:
- ✅ `sample_valid.json` - Perfectly matches the schema
- ⚠️ Existing files (`order_detail.json`, `expected_order_details.json`, `enriched_order_detail.json`) use different schema structures

## Error Handling

The validator provides detailed error messages including:
- **Path information**: Shows exactly where in the JSON the error occurred
- **Error description**: Clear explanation of what went wrong
- **Expected values**: What the schema expected to find

Example error output:
```
✗ INVALID - Validation errors found:
  1. Path: OrderDetails | Error: 'Equipment' is a required property | Expected: ['OrderId', 'Status', 'Equipment', 'TotalPaid']
  2. Path: root | Error: Additional properties are not allowed ('MovingHelpDetails' was unexpected) | Expected: False
```

## Files Created

- `validate_json_schema.py` - Main validator script
- `requirements_validator.txt` - Python dependencies
- `data/sample_valid.json` - Sample data that passes validation
- `JSON_VALIDATOR_README.md` - This documentation

## Advanced Usage

The validator supports various command-line options. Run with `--help` for full details:

```bash
python3 validate_json_schema.py --help
```
